// noconflict header start
;(function($){
// noconflict header end
/*
 
jSignature v2 "2012-11-01T22:48" "commit ID 1c15dfafecc75925c3b7d529356a558b59220edb"
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
Copyright (c) 2010 Brinley Ang http://www.unbolt.net
MIT License <http://www.opensource.org/licenses/mit-license.php> 


Simplify.js BSD 
(c) 2012, Vladimir Agafonkin
mourner.github.com/simplify-js


base64 encoder
MIT, GPL
http://phpjs.org/functions/base64_encode
+   original by: Tyler Akins (http://rumkin.com)
+   improved by: Bayron Guevara
+   improved by: Thunder.m
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   bugfixed by: Pellentesque Malesuada
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   improved by: Rafal Kukawski (http://kukawski.pl)


jSignature v2 jSignature's Undo Button and undo functionality plugin


jSignature v2 jSignature's custom "base30" format export and import plugins.


jSignature v2 SVG export plugin.

*/
!function(){var t="jSignature",n=function(t,n){var e;return this.kick=function(){clearTimeout(e),e=setTimeout(n,t)},this.clear=function(){clearTimeout(e)},this},e=function(t){"use strict";this.topics={},this.context=t||this,this.publish=function(t,n,e,i){if(this.topics[t]){var r,s,o,a,h=this.topics[t],u=Array.prototype.slice.call(arguments,1),c=[];for(s=0,o=h.length;s<o;s++)r=(a=h[s])[0],a[1]&&(a[0]=function(){},c.push(s)),r.apply(this.context,u);for(s=0,o=c.length;s<o;s++)h.splice(c[s],1)}},this.subscribe=function(t,n,e){return this.topics[t]?this.topics[t].push([n,e]):this.topics[t]=[[n,e]],{topic:t,callback:n}},this.unsubscribe=function(t){if(this.topics[t.topic])for(var n=this.topics[t.topic],e=0,i=n.length;e<i;e++)n[e][0]===t.callback&&n.splice(e,1)}};function i(t,n){this.x=t,this.y=n,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var e=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*e(this.y);else if(0===this.y)this._length=t,this.x=t*e(this.x);else{var n=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(n,2))),r=n*i;this._length=t,this.x=i*e(this.x),this.y=r*e(this.y)}return this},this.angleTo=function(t){var n=this.getLength()*t.getLength();return 0===n?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/n,-1),1))/Math.PI}}function r(t,n){this.x=t,this.y=n,this.getVectorToCoordinates=function(t,n){return new i(t-this.x,n-this.y)},this.getVectorFromCoordinates=function(t,n){return this.getVectorToCoordinates(t,n).reverse()},this.getVectorToPoint=function(t){return new i(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function s(t,n,e,i,r){if(this.data=t,this.context=n,t.length)for(var s,o,a=t.length,h=0;h<a;h++){o=(s=t[h]).x.length,e.call(n,s);for(var u=1;u<o;u++)i.call(n,s,u);r.call(n,s)}this.changed=function(){},this.startStrokeFn=e,this.addToStrokeFn=i,this.endStrokeFn=r,this.inStroke=!1,this._lastPoint=null,this._stroke=null,this.startStroke=function(t){if(t&&"number"==typeof t.x&&"number"==typeof t.y){this._stroke={x:[t.x],y:[t.y]},this.data.push(this._stroke),this._lastPoint=t,this.inStroke=!0;var n=this._stroke,e=this.startStrokeFn,i=this.context;return setTimeout(function(){e.call(i,n)},3),t}return null},this.addToStroke=function(t){if(this.inStroke&&"number"==typeof t.x&&"number"==typeof t.y&&Math.abs(t.x-this._lastPoint.x)+Math.abs(t.y-this._lastPoint.y)>4){var n=this._stroke.x.length;this._stroke.x.push(t.x),this._stroke.y.push(t.y),this._lastPoint=t;var e=this._stroke,i=this.addToStrokeFn,r=this.context;return setTimeout(function(){i.call(r,e,n)},3),t}return null},this.endStroke=function(){var t=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,t){var n=this._stroke,e=this.endStrokeFn,i=this.context,r=this.changed;return setTimeout(function(){e.call(i,n),r.call(i)},3),!0}return null}}var o=function(t,n,e,i,r){t.beginPath(),t.moveTo(n,e),t.lineTo(i,r),t.stroke()},a=function(t,n,e,i,r,s,o,a,h){t.beginPath(),t.moveTo(n,e),t.bezierCurveTo(s,o,a,h,i,r),t.stroke()},h=function(t){var n,e,i,r,s;n=this.canvasContext,e=t.x[0],i=t.y[0],r=this.settings.lineWidth,s=n.fillStyle,n.fillStyle=n.strokeStyle,n.fillRect(e+r/-2,i+r/-2,r,r),n.fillStyle=s},u=function(t,n){var e=new r(t.x[n-1],t.y[n-1]),s=new r(t.x[n],t.y[n]),h=e.getVectorToPoint(s);if(n>1){var u,c=new r(t.x[n-2],t.y[n-2]),l=c.getVectorToPoint(e);if(l.getLength()>this.lineCurveThreshold){u=n>2?new r(t.x[n-3],t.y[n-3]).getVectorToPoint(c):new i(0,0);var d=.35*l.getLength(),g=l.angleTo(u.reverse()),f=h.angleTo(l.reverse()),p=new i(u.x+l.x,u.y+l.y).resizeTo(Math.max(.05,g)*d),v=new i(l.x+h.x,l.y+h.y).reverse().resizeTo(Math.max(.05,f)*d);a(this.canvasContext,c.x,c.y,e.x,e.y,c.x+p.x,c.y+p.y,e.x+v.x,e.y+v.y)}}h.getLength()<=this.lineCurveThreshold&&o(this.canvasContext,e.x,e.y,s.x,s.y)},c=function(t){var n=t.x.length-1;if(n>0){var e,s=new r(t.x[n],t.y[n]),h=new r(t.x[n-1],t.y[n-1]),u=h.getVectorToPoint(s);if(u.getLength()>this.lineCurveThreshold)if(n>1){var c=new i((e=new r(t.x[n-2],t.y[n-2]).getVectorToPoint(h)).x+u.x,e.y+u.y).resizeTo(u.getLength()/2);a(this.canvasContext,h.x,h.y,s.x,s.y,h.x+c.x,h.y+c.y,s.x,s.y)}else o(this.canvasContext,h.x,h.y,s.x,s.y)}};function l(i,s,o){var a=this.$parent=$(i),h=this.eventTokens={},u=(this.events=new e(this),$.fn[t]("globalEvents")),c={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};for(var l in $.extend(c,function(t){for(var n,e,i=t.css("color"),r=t[0],s=!1;r&&!e&&!s;){try{n=$(r).css("background-color")}catch(t){n="transparent"}"transparent"!==n&&"rgba(0, 0, 0, 0)"!==n&&(e=n),s=r.body,r=r.parentNode}var o,a,h=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,u=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;n=void 0,(n=i.match(h))?o={r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}:(n=i.match(u))&&(o={r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}),e?(n=void 0,(n=e.match(h))?a={r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}:(n=e.match(u))&&(a={r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)})):a=o&&Math.max.apply(null,[o.r,o.g,o.b])>127?{r:0,g:0,b:0}:{r:255,g:255,b:255};var c,l,d,g=function(t){return"rgb("+[t.r,t.g,t.b].join(", ")+")"};if(o&&a){var f=Math.max.apply(null,[o.r,o.g,o.b]);l=Math.max.apply(null,[a.r,a.g,a.b]),c={r:d=Math.round(l+-1*(l-f)*.75),g:d,b:d}}else if(o){var p=1;(l=Math.max.apply(null,[o.r,o.g,o.b]))>127&&(p=-1),c={r:d=Math.round(l+96*p),g:d,b:d}}else c={r:191,g:191,b:191};return{color:i,"background-color":a?g(a):e,"decor-color":g(c)}}(a)),s&&$.extend(c,s),this.settings=c,o)o.hasOwnProperty(l)&&o[l].call(this,l);this.events.publish(t+".initializing"),this.$controlbarUpper=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(a),this.isCanvasEmulator=!1;var d,g,f=this.canvas=this.initializeCanvas(c),p=$(f);this.$controlbarLower=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(a),this.canvasContext=f.getContext("2d"),p.data(t+".this",this),c.lineWidth=(d=c.lineWidth,g=f.width,d||Math.max(Math.round(g/400),2)),this.lineCurveThreshold=3*c.lineWidth,c.cssclass&&""!=$.trim(c.cssclass)&&p.addClass(c.cssclass),this.fatFingerCompensation=0;var v=function(t){var e,i,s=function(n){var s=n.changedTouches&&n.changedTouches.length>0?n.changedTouches[0]:n;return new r(Math.round(s.pageX+e),Math.round(s.pageY+i)+t.fatFingerCompensation)},o=new n(750,function(){t.dataEngine.endStroke()});return this.drawEndHandler=function(n){try{n.preventDefault()}catch(t){}o.clear(),t.dataEngine.endStroke()},this.drawStartHandler=function(n){var r;n.preventDefault(),r=$(t.canvas).offset(),e=-1*r.left,i=-1*r.top,t.dataEngine.startStroke(s(n)),o.kick()},this.drawMoveHandler=function(n){n.preventDefault(),t.dataEngine.inStroke&&(t.dataEngine.addToStroke(s(n)),o.kick())},this}.call({},this);return function(n,e,i){var r=this.canvas,s=$(r);this.isCanvasEmulator?(s.bind("mousemove."+t,i),s.bind("mouseup."+t,n),s.bind("mousedown."+t,e)):(r.ontouchstart=function(t){r.onmousedown=void 0,r.onmouseup=void 0,r.onmousemove=void 0,this.fatFingerCompensation=c.minFatFingerCompensation&&-3*c.lineWidth>c.minFatFingerCompensation?-3*c.lineWidth:c.minFatFingerCompensation,e(t),r.ontouchend=n,r.ontouchstart=e,r.ontouchmove=i},r.onmousedown=function(t){r.ontouchstart=void 0,r.ontouchend=void 0,r.ontouchmove=void 0,e(t),r.onmousedown=e,r.onmouseup=n,r.onmousemove=i})}.call(this,v.drawEndHandler,v.drawStartHandler,v.drawMoveHandler),h[t+".windowmouseup"]=u.subscribe(t+".windowmouseup",v.drawEndHandler),this.events.publish(t+".attachingEventHandlers"),function(t,n,e,i){"use strict";var r,s,o;"ratio"!==n&&"%"!==n.split("")[n.length-1]||(this.eventTokens[e+".parentresized"]=i.subscribe(e+".parentresized",(r=this.eventTokens,s=this.$parent,o=this.$parent.width(),this.canvas.width,this.canvas.height,function(){var n=s.width();if(n!==o){for(var a in r)r.hasOwnProperty(a)&&(i.unsubscribe(r[a]),delete r[a]);var h=t.settings;for(var a in t.$parent.children().remove(),t)t.hasOwnProperty(a)&&delete t[a];h.data=function(t,n){var e,i,r,s,o,a,h=[];for(i=0,r=t.length;i<r;i++){for(e={x:[],y:[]},s=0,o=(a=t[i]).x.length;s<o;s++)e.x.push(a.x[s]*n),e.y.push(a.y[s]*n);h.push(e)}return h}(h.data,1*n/o),s[e](h)}})))}.call(this,this,c.width.toString(10),t,u),this.resetCanvas(c.data),this.events.publish(t+".initialized"),this}l.prototype.resetCanvas=function(n){var e=this.canvas,i=this.settings,r=this.canvasContext,a=this.isCanvasEmulator,l=e.width,d=e.height;r.clearRect(0,0,l+30,d+30),r.shadowColor=r.fillStyle=i["background-color"],a&&r.fillRect(0,0,l+30,d+30),r.lineWidth=Math.ceil(parseInt(i.lineWidth,10)),r.lineCap=r.lineJoin="round",r.strokeStyle=i["decor-color"],r.shadowOffsetX=0,r.shadowOffsetY=0;var g=Math.round(d/5);o(r,1.5*g,d-g,l-1.5*g,d-g),r.strokeStyle=i.color,a||(r.shadowColor=r.strokeStyle,r.shadowOffsetX=.5*r.lineWidth,r.shadowOffsetY=-.6*r.lineWidth,r.shadowBlur=0),n||(n=[]);var f=this.dataEngine=new s(n,this,h,u,c);return i.data=n,$(e).data(t+".data",n).data(t+".settings",i),f.changed=function(t,n,e){"use strict";return function(){n.publish(e+".change"),t.trigger("change")}}(this.$parent,this.events,t),f.changed(),!0},l.prototype.initializeCanvas=function(n){var e=document.createElement("canvas"),i=$(e);return n.width===n.height&&"ratio"===n.height&&(n.width="100%"),i.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==n.height&&n.height?n.height.toString(10):1).css("width","ratio"!==n.width&&n.width?n.width.toString(10):1),i.appendTo(this.$parent),"ratio"===n.height?i.css("height",Math.round(i.width()/n.sizeRatio)):"ratio"===n.width&&i.css("width",Math.round(i.height()*n.sizeRatio)),i.addClass(t),e.width=i.width(),e.height=i.height(),this.isCanvasEmulator=function(t){if(t.getContext)return!1;var n=t.ownerDocument.parentWindow,e=n.FlashCanvas?t.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(e){t=e.initElement(t);var i=1;if(n&&n.screen&&n.screen.deviceXDPI&&n.screen.logicalXDPI&&(i=1*n.screen.deviceXDPI/n.screen.logicalXDPI),1!==i)try{$(t).children("object").get(0).resize(Math.ceil(t.width*i),Math.ceil(t.height*i)),t.getContext("2d").scale(i,i)}catch(t){}return!0}throw new Error("Canvas element does not support 2d context. jSignature cannot proceed.")}(e),e.onselectstart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),!1},e};!function(n){var i=new e;!function(t,n,e,i){"use strict";var r,s=function(){t.publish(n+".parentresized")};e(i).bind("resize."+n,function(){r&&clearTimeout(r),r=setTimeout(s,500)}).bind("mouseup."+n,function(e){t.publish(n+".windowmouseup")})}(i,t,$,n);var r={},s={default:function(t){return this.toDataURL()},native:function(t){return t},image:function(t){var n=this.toDataURL();if("string"==typeof n&&n.length>4&&"data:"===n.slice(0,5)&&-1!==n.indexOf(",")){var e=n.indexOf(",");return[n.slice(5,e),n.substr(e+1)]}return[]}};function o(t,n,e){"use strict";var i=new Image,r=this;i.onload=function(){r.getContext("2d").drawImage(i,0,0,i.width<r.width?i.width:r.width,i.height<r.height?i.height:r.height)},i.src="data:"+n+","+t}var a={native:function(t,n,e){e(t)},image:o,"image/png;base64":o,"image/jpeg;base64":o,"image/jpg;base64":o};function h(n){return this.find("canvas."+t).add(this.filter("canvas."+t)).data(t+".this").resetCanvas(n),this}function u(n,e){if(void 0!==e||"string"!=typeof n||"data:"!==n.substr(0,5)||(e=n.slice(5).split(",")[0])!==(n=n.slice(6+e.length))){var i,r=this.find("canvas."+t).add(this.filter("canvas."+t));if(!a.hasOwnProperty(e))throw new Error(t+" is unable to find import plugin with for format '"+String(e)+"'");return 0!==r.length&&a[e].call(r[0],n,e,(i=r.data(t+".this"),function(){return i.resetCanvas.apply(i,arguments)})),this}}var c={export:s,import:a,instance:r},d={init:function(t){return this.each(function(){(function(t){var n=!1;for(t=t.parentNode;t&&!n;)n=t.body,t=t.parentNode;return!n})(this)||new l(this,t,r)})},getSettings:function(){return this.find("canvas."+t).add(this.filter("canvas."+t)).data(t+".this").settings},clear:h,reset:h,addPlugin:function(t,n,e){return c.hasOwnProperty(t)&&(c[t][n]=e),this},listPlugins:function(t){var n=[];if(c.hasOwnProperty(t)){var e=c[t];for(var i in e)e.hasOwnProperty(i)&&n.push(i)}return n},getData:function(n){var e=this.find("canvas."+t).add(this.filter("canvas."+t));if(void 0===n&&(n="default"),0!==e.length&&s.hasOwnProperty(n))return s[n].call(e.get(0),e.data(t+".data"))},importData:u,setData:u,globalEvents:function(){return i},events:function(){return this.find("canvas."+t).add(this.filter("canvas."+t)).data(t+".this").events}};$.fn[t]=function(n){"use strict";return n&&"object"!=typeof n?"string"==typeof n&&d[n]?d[n].apply(this,Array.prototype.slice.call(arguments,1)):void $.error("Method "+String(n)+" does not exist on jQuery."+t):d.init.apply(this,arguments)}}(window)}(),function(){function t(t){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[t]){var n=this.settings[t];"function"!=typeof n&&(n=function(){var t=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),n=t.width();return t.css("left",Math.round((this.canvas.width-n)/2)),n!==t.width()&&t.width(n),t}),function(t,n,e){var i=t.call(this);!function(t,n,e){t.events.subscribe(e+".change",function(){t.dataEngine.data.length?n.show():n.hide()})}(this,i,n),function(t,n,e){var i=e+".undo";n.bind("click",function(){t.events.publish(i)}),t.events.subscribe(i,function(){var n=t.dataEngine.data;n.length&&(n.pop(),t.resetCanvas(n))})}(this,i,this.events.topics.hasOwnProperty(n+".undo")?e:n)}.call(this,n,"jSignature",t)}})}$.fn.jSignature("addPlugin","instance","UndoButton",t)}(),function(){for(var t={},n={},e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),i=e.length/2,r=i-1;r>-1;r--)t[e[r]]=e[r+i],n[e[r+i]]=e[r];var s,o,a=function(n){for(var e=n.split(""),i=e.length,r=1;r<i;r++)e[r]=t[e[r]];return e.join("")},h=function(t){for(var n,e,r,s=[],o=0,h=1,u=t.length,c=0;c<u;c++)e=(n=Math.round(t[c]))-o,o=n,e<0&&h>0?(h=-1,s.push("Z")):e>0&&h<0&&(h=1,s.push("Y")),(r=Math.abs(e))>=i?s.push(a(r.toString(i))):s.push(r.toString(i));return s.join("")},u=function(e){for(var r,s,o=[],a=e.split(""),h=a.length,u=1,c=[],l=0,d=0;d<h;d++)(r=a[d])in t||"Z"===r||"Y"===r?(0!==c.length&&(s=parseInt(c.join(""),i)*u+l,o.push(s),l=s),"Z"===r?(u=-1,c=[]):"Y"===r?(u=1,c=[]):c=[r]):c.push(n[r]);return o.push(parseInt(c.join(""),i)*u+l),o},c=function(t){for(var n,e=[],i=t.length,r=0;r<i;r++)n=t[r],e.push(h(n.x)),e.push(h(n.y));return e.join("_")},l=function(t){for(var n=[],e=t.split("_"),i=e.length/2,r=0;r<i;r++)n.push({x:u(e[2*r]),y:u(e[2*r+1])});return n},d="image/jsignature;base30",g=function(t){return[d,c(t)]},f=function(t,n,e){"string"==typeof t&&(t.substring(0,d.length).toLowerCase()===d&&(t=t.substring(d.length+1)),e(l(t)))};if(null==this.jQuery)throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");s=this.jQuery,(o=s.fn.jSignature)("addPlugin","export","base30",g),o("addPlugin","export",d,g),o("addPlugin","import","base30",f),o("addPlugin","import",d,f),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:a,compressstrokeleg:h,uncompressstrokeleg:u,compressstrokes:c,uncompressstrokes:l,charmap:t})}.call("undefined"!=typeof window?window:this),function(){"use strict";function t(t,n){this.x=t,this.y=n,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var e=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*e(this.y);else if(0===this.y)this._length=t,this.x=t*e(this.x);else{var n=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(n,2))),r=n*i;this._length=t,this.x=i*e(this.x),this.y=r*e(this.y)}return this},this.angleTo=function(t){var n=this.getLength()*t.getLength();return 0===n?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/n,-1),1))/Math.PI}}function n(n,e){this.x=n,this.y=e,this.getVectorToCoordinates=function(n,e){return new t(n-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,n){return this.getVectorToCoordinates(t,n).reverse()},this.getVectorToPoint=function(n){return new t(n.x-this.x,n.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function e(t,n){var e=Math.pow(10,n);return Math.round(t*e)/e}function i(i,r,s){r+=1;var o,a=new n(i.x[r-1],i.y[r-1]),h=new n(i.x[r],i.y[r]),u=a.getVectorToPoint(h),c=new n(i.x[r-2],i.y[r-2]),l=c.getVectorToPoint(a);if(l.getLength()>s){o=r>2?new n(i.x[r-3],i.y[r-3]).getVectorToPoint(c):new t(0,0);var d=.35*l.getLength(),g=l.angleTo(o.reverse()),f=u.angleTo(l.reverse()),p=new t(o.x+l.x,o.y+l.y).resizeTo(Math.max(.05,g)*d),v=new t(l.x+u.x,l.y+u.y).reverse().resizeTo(Math.max(.05,f)*d),y=new t(l.x+v.x,l.y+v.y);return["c",e(p.x,2),e(p.y,2),e(y.x,2),e(y.y,2),e(l.x,2),e(l.y,2)]}return["l",e(l.x,2),e(l.y,2)]}function r(r,s,o){for(var a=["M",e(r.x[0]-s,2),e(r.y[0]-o,2)],h=1,u=r.x.length-1;h<u;h++)a.push.apply(a,i(r,h,1));return u>0?a.push.apply(a,function(i,r){var s=i.x.length-1,o=new n(i.x[s],i.y[s]),a=new n(i.x[s-1],i.y[s-1]),h=a.getVectorToPoint(o);if(s>1&&h.getLength()>r){var u=new n(i.x[s-2],i.y[s-2]).getVectorToPoint(a),c=h.angleTo(u.reverse()),l=.35*h.getLength(),d=new t(u.x+h.x,u.y+h.y).resizeTo(Math.max(.05,c)*l);return["c",e(d.x,2),e(d.y,2),e(h.x,2),e(h.y,2),e(h.x,2),e(h.y,2)]}return["l",e(h.x,2),e(h.y,2)]}(r,h)):0===u&&a.push.apply(a,["l",1,1]),a.join(" ")}function s(t){var n,e,i=[],r={x:[],y:[]};for(n=0,e=t.x.length;n<e;n++)i.push({x:t.x[n],y:t.y[n]});for(n=0,e=(i=simplify(i,.7,!0)).length;n<e;n++)r.x.push(i[n].x),r.y.push(i[n].y);return r}function o(t){var n,e,i,o,a,h=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],u=t.length,c=[],l=[],d=0,g=0,f=0,p=0,v=[];if(0!==u){for(n=0;n<u;n++)e=s(t[n]),v.push(e),c=c.concat(e.x),l=l.concat(e.y);i=Math.min.apply(null,c)-1,o=Math.max.apply(null,c)+1,f=i<0?0:i,p=(a=Math.min.apply(null,l)-1)<0?0:a,d=o-i,g=Math.max.apply(null,l)+1-a}for(h.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+d.toString()+'" height="'+g.toString()+'">'),n=0,u=v.length;n<u;n++)e=v[n],h.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+r(e,f,p)+'"/>');return h.push("</svg>"),h.join("")}if(function(t,n){function e(t,n){var e=t.x-n.x,i=t.y-n.y;return e*e+i*i}function i(t,n,e){var i,r=n.x,s=n.y,o=e.x-r,a=e.y-s;return 0===o&&0===a||((i=((t.x-r)*o+(t.y-s)*a)/(o*o+a*a))>1?(r=e.x,s=e.y):i>0&&(r+=o*i,s+=a*i)),(o=t.x-r)*o+(a=t.y-s)*a}function r(t,n){var i,r,s=t.length,o=t[0],a=[o];for(i=1;i<s;i++)e(r=t[i],o)>n&&(a.push(r),o=r);return o!==r&&a.push(r),a}function s(t,e){var r,s,o,a,h=t.length,u=new(typeof Uint8Array!=n+""?Uint8Array:Array)(h),c=0,l=h-1,d=[],g=[],f=[];for(u[c]=u[l]=1;l;){for(s=0,r=c+1;r<l;r++)(o=i(t[r],t[c],t[l]))>s&&(a=r,s=o);s>e&&(u[a]=1,d.push(c),g.push(a),d.push(a),g.push(l)),c=d.pop(),l=g.pop()}for(r=0;r<h;r++)u[r]&&f.push(t[r]);return f}(typeof exports!=n+""?exports:t).simplify=function(t,e,i){var o=e!==n?e*e:1;return i||(t=r(t,o)),t=s(t,o)}}(window),"function"!=typeof a)var a=function(t){var n,e,i,r,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),a=0,h=0,u="",c=[];do{n=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,e=s>>12&63,i=s>>6&63,r=63&s,c[h++]=o[n]+o[e]+o[i]+o[r]}while(a<t.length);u=c.join("");var l=t.length%3;return(l?u.slice(0,l-3):u)+"===".slice(l||3)};var h="image/svg+xml";function u(t){return[h,o(t)]}var c="image/svg+xml;base64";function l(t){return[c,a(o(t))]}if("undefined"==typeof $)throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");!function(t){var n=t.fn.jSignature;n("addPlugin","export","svg",u),n("addPlugin","export",h,u),n("addPlugin","export","svgbase64",l),n("addPlugin","export",c,l)}($)}();



// noconflict footer start
})(jQuery);
// noconflict footer end